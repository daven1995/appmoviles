<!DOCTYPE html>
<html ng-app="mapa">

<head>
    <link rel="stylesheet" href="ionic/css/ionic.min.css">
    <script src="ionic/js/ionic.bundle.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB16sGmIekuGIvYOfNoW9T44377IU2d2Es&sensor=true"></script>
</head>

<body ng-controller="control1">
    <ion-header-bar class="bar-positive">
        <h1 class="title"> Hola</h1> </ion-header-bar>
    <ion-content>
        <map></map> {{texto}} {{num}}
        <div id='miMapa' style="width:100%;height:500px"></div>
        <button ng-click="prueba()">Prueba</button>
    </ion-content>
    <script>
        var mia = angular.module('mapa', ['ionic']).controller('control1', david); //<!-- la funcion vva a manejar todo el programa -->
        /* .directive('map', function () {
             var obj = {
                 restrict: 'E'
                 , link: function (scope, elemento, atributo) {
                     var opciones = {};

                     function inicio() {
                         return 'Hola amiguitos'
                     };
                     elemento.html(inicio());
                 }
             };
             return obj;
         })*/
        function david($scope) {
            $scope.num = 1;
            $scope.prueba = function () {
                $scope.num++;
                var ll = new google.maps.LatLng(0.132, -43.48);
                var opciones = {
                    center: ll
                    , zoom: 10
                    , mapTypeId: google.maps.MapTypeId.ROADMAP
                };
                var etiqueta = document.getElementById('miMapa');
                var mapa = new google.maps.Map(etiqueta, opciones);
                /*var marcador = new google.maps.marker {
                    {
                        position: ll
                        , map: null
                        , graggable: true
                    }
                };*/
            }
        };
    </script>
</body>

</html>